globals:
  codebase_dir: ../mmsegmentation
  checkpoint_force_download: False
  images:
    img_leftImg8bit: &img_leftImg8bit ../mmsegmentation/tests/data/pseudo_cityscapes_dataset/leftImg8bit/val/frankfurt/frankfurt_000000_000294_leftImg8bit.png
    img_loveda_0: &img_loveda_0 ../mmsegmentation/tests/data/pseudo_loveda_dataset/img_dir/0.png

  metric_info: &metric_info
    mIoU: # named after metafile.Results.Metrics
      metric_key: mIoU # eval OrderedDict key name
      tolerance: 1 # metric Â±n%
  convert_image: &convert_image
    input_img: *img_leftImg8bit
    test_img: *img_loveda_0
  backend_test: &default_backend_test True
  sdk:
    sdk_dynamic: &sdk_dynamic configs/mmseg/segmentation_sdk_dynamic.py

tensorrt:
  pipeline_trt_dynamic_fp16: &pipeline_trt_dynamic_fp16
    convert_image: *convert_image
    backend_test: *default_backend_test
    sdk_config: *sdk_dynamic
    deploy_config: configs/mmseg/segmentation_tensorrt-fp16_static-512x512.py

models:
  - name: deeplabv3+
    metafile: configs/deeplabv3plus/deeplabv3plus.yml
    model_configs:
      - configs/deeplabv3plus/deeplabv3plus_r18-d8_4xb2-80k_cityscapes-512x1024.py
    pipelines:
      - *pipeline_trt_dynamic_fp16

  - name: deeplabv3+_mobilenet_v2
    metafile: configs/mobilenet_v2/mobilenet_v2.yml
    model_configs:
      - configs/mobilenet_v2/mobilenet-v2-d8_deeplabv3plus_4xb2-80k_cityscapes-512x1024.py
    pipelines:
      - *pipeline_trt_dynamic_fp16

  - name: Fast-SCNN
    metafile: configs/fastscnn/fastscnn.yml
    model_configs:
      - configs/fastscnn/fast_scnn_8xb4-160k_cityscapes-512x1024.py
    pipelines:
      - *pipeline_trt_dynamic_fp16

  - name: BiSeNetV2
    metafile: configs/bisenetv2/bisenetv2.yml
    model_configs:
      - configs/bisenetv2/bisenetv2_fcn_4xb4-160k_cityscapes-1024x1024.py
    pipelines:
      - *pipeline_trt_dynamic_fp16

  - name: STDC
    metafile: configs/stdc/stdc.yml
    model_configs:
      - configs/stdc/stdc1_in1k-pre_4xb12-80k_cityscapes-512x1024.py
      - configs/stdc/stdc2_in1k-pre_4xb12-80k_cityscapes-512x1024.py
    pipelines:
      - *pipeline_trt_dynamic_fp16
